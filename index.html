<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>Gmail - 2083km Edition</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Georgia:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #d93025;
            --active-bg: #fce8e6;
            --text-primary: #202124;
            --text-secondary: #5f6368;
            --border-color: #e0e0e0;
            --search-bg: #e3e7ed;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin: 0; padding: 0; }
        html, body { width: 100%; height: 100%; overflow: hidden; background: #fff; font-family: 'Roboto', sans-serif; }

        .app-shell { width: 100%; height: 100%; display: flex; flex-direction: column; }

        .header { padding: 16px; background: #f5f7fa; z-index: 100; }
        .search-container { height: 56px; background: var(--search-bg); border-radius: 28px; display: flex; align-items: center; padding: 0 16px; }
        .menu-icon { width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; cursor: pointer; margin-right: 16px; }
        .search-input { flex: 1; font-size: 16px; color: #3c4043; background: transparent; border: none; outline: none; font-family: 'Roboto', sans-serif; font-weight: 400; }
        .search-input::placeholder { color: #5f6368; }
        .pfp-btn { width: 32px; height: 32px; background: #ea4335; color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 500; font-size: 14px; cursor: pointer; margin-left: 12px; }

        .profile-dropdown { position: fixed; top: 80px; right: 16px; width: 280px; background: #fff; border-radius: 16px; box-shadow: 0 4px 16px rgba(0,0,0,0.2); padding: 24px 20px; z-index: 150; display: none; text-align: center; }
        .profile-dropdown.active { display: block; }
        .profile-email-text { font-size: 14px; color: #5f6368; margin-bottom: 20px; }
        .profile-ring-box { width: 80px; height: 80px; margin: 0 auto 16px; position: relative; display: flex; align-items: center; justify-content: center; }
        .profile-ring { position: absolute; inset: 0; border-radius: 50%; padding: 3px; background: conic-gradient(#4285f4 0 25%, #ea4335 25% 50%, #fbbc05 50% 75%, #34a853 75% 100%); -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0); -webkit-mask-composite: xor; mask-composite: exclude; }
        .profile-avatar-large { width: 72px; height: 72px; border-radius: 50%; background: #ea4335; display: flex; align-items: center; justify-content: center; font-size: 32px; font-weight: 500; color: white; }
        .profile-hi { font-size: 24px; font-weight: 400; color: #202124; }

        .sidebar-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.4); z-index: 200; opacity: 0; visibility: hidden; transition: 0.25s; }
        .sidebar-overlay.active { opacity: 1; visibility: visible; }

        .sidebar { position: fixed; top: 0; bottom: 0; left: 0; width: 300px; background: #fff; z-index: 250; transform: translateX(-100%); transition: transform 0.28s cubic-bezier(0.4, 0, 0.2, 1); display: flex; flex-direction: column; box-shadow: 2px 0 8px rgba(0,0,0,0.15); }
        .sidebar.open { transform: translateX(0); }

        .sidebar-header { padding: 20px 24px; display: flex; align-items: center; gap: 14px; }
        .sidebar-logo { height: 40px; width: auto; }
        .sidebar-logo-text { font-size: 22px; color: #5f6368; font-weight: 400; }

        .nav-list { overflow-y: auto; padding: 8px 0; }
        .nav-item { height: 48px; display: flex; align-items: center; padding: 0 24px; gap: 24px; cursor: pointer; color: var(--text-primary); border-radius: 0 24px 24px 0; margin-right: 8px; }
        .nav-item:hover { background: #f1f3f4; }
        .nav-item.active { background: var(--active-bg); color: var(--primary-color); }
        .icon-svg { width: 24px; height: 24px; fill: #5f6368; }
        .nav-item.active .icon-svg { fill: var(--primary-color); }
        .nav-text { flex: 1; font-size: 14px; font-weight: 500; }
        .nav-badge { font-size: 12px; color: #5f6368; font-weight: 500; }
        .nav-item.active .nav-badge { color: var(--primary-color); }
        .divider { height: 1px; background: #e0e0e0; margin: 8px 0; }

        .ai-overview { margin: 16px; background: #f0f4f9; border-radius: 16px; padding: 16px; cursor: pointer; display: none; }
        .ai-header { display: flex; align-items: center; gap: 12px; }
        .ai-sparkle { width: 20px; height: 20px; }
        .ai-title { flex: 1; font-size: 15px; font-weight: 500; color: #1f1f1f; }
        .ai-chevron { width: 18px; height: 18px; fill: #5f6368; transition: 0.2s; }
        .ai-overview.expanded .ai-chevron { transform: rotate(180deg); }
        .ai-content { display: none; margin-top: 12px; font-size: 14px; line-height: 1.5; color: #1f1f1f; }
        .ai-overview.expanded .ai-content { display: block; }

        .category-label { padding: 20px 16px 12px; font-size: 12px; text-transform: uppercase; letter-spacing: 0.8px; color: #5f6368; font-weight: 500; }
        .email-list-container { flex: 1; overflow-y: auto; background: #fff; }

        .email-item { display: flex; align-items: flex-start; padding: 16px; cursor: pointer; background: #fff; gap: 16px; border-bottom: 1px solid #f1f1f1; }
        .email-item:active { background: #f8f9fa; }

        .avatar-circle { width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 500; font-size: 18px; color: white; flex-shrink: 0; text-transform: uppercase; }
        .email-content-main { flex: 1; min-width: 0; }
        .email-first-line { display: flex; align-items: baseline; margin-bottom: 4px; justify-content: space-between; }
        .sender-name { font-size: 14px; color: #1f1f1f; font-weight: 500; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; flex: 1; margin-right: 8px; }
        .email-time { font-size: 12px; color: #5f6368; font-weight: 400; flex-shrink: 0; }
        .subject-line { font-size: 14px; color: #1f1f1f; margin-bottom: 4px; font-weight: 500; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
        .snippet { font-size: 13px; color: #5f6368; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
        .star-icon { width: 24px; height: 24px; flex-shrink: 0; margin-top: 2px; display: flex; align-items: center; justify-content: center; }
        .star-svg { width: 20px; height: 20px; fill: none; stroke: #5f6368; stroke-width: 2; transition: 0.2s; }
        .star-svg.starred { fill: #f9ab00; stroke: #f9ab00; }

        .email-detail { display: none; flex-direction: column; height: 100%; overflow-y: auto; background: white; position: absolute; top: 0; left: 0; width: 100%; z-index: 150; }
        .email-detail.active { display: flex; }

        .detail-header-bar { padding: 8px 4px; display: flex; align-items: center; justify-content: space-between; background: #fff; position: sticky; top: 0; z-index: 10; }
        .back-btn, .action-btn { width: 48px; height: 48px; display: flex; align-items: center; justify-content: center; cursor: pointer; border-radius: 50%; }
        .back-btn:active, .action-btn:active { background: #f1f3f4; }

        .detail-subject-header { padding: 20px 16px 16px; display: flex; align-items: flex-start; justify-content: space-between; gap: 12px; }
        .subject-container { display: flex; flex-direction: row; align-items: baseline; flex-wrap: wrap; gap: 8px; flex: 1; }
        .detail-subject-text { font-size: 20px; font-weight: 400; color: var(--text-primary); line-height: 1.3; }
        .detail-inbox-label { padding: 2px 8px; background: #e8eaed; border-radius: 4px; font-size: 11px; color: #5f6368; font-weight: 500; display: inline-block; }
        .detail-star { width: 24px; height: 24px; margin-top: 4px; cursor: pointer; flex-shrink: 0; }

        .detail-sender-row { display: flex; align-items: center; gap: 12px; padding: 0 16px 16px; }
        .sender-avatar-detail { width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 500; font-size: 18px; color: white; flex-shrink: 0; }
        .sender-info-detail { flex: 1; }
        .sender-name-detail { font-size: 14px; font-weight: 500; color: var(--text-primary); }
        .sender-to { font-size: 12px; color: var(--text-secondary); }
        .detail-time { font-size: 12px; color: var(--text-secondary); }

        .artistic-illustration { width: 100%; padding: 20px 0; background: #fff; display: flex; justify-content: center; overflow: hidden; }
        .artistic-illustration svg { max-width: 100%; height: auto; max-height: 220px; display: block; margin: 0 auto; filter: drop-shadow(0px 2px 4px rgba(0,0,0,0.05)); }

        .detail-body { padding: 0 16px 100px; line-height: 1.7; color: #202124; font-size: 15px; font-family: 'Georgia', serif; }

        .view-hidden { display: none; }
        .view-visible { display: flex; flex-direction: column; }
    </style>
</head>
<body>
    <div class="app-shell">
        <div class="sidebar-overlay" id="overlay"></div>

        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <img src="https://ssl.gstatic.com/ui/v1/icons/mail/rfr/gmail.ico" alt="Gmail" class="sidebar-logo">
                <span class="sidebar-logo-text">Gmail</span>
            </div>
            
            <div class="nav-list">
                <div class="nav-item active" data-view="all-inboxes" data-color="#d93025" data-bg="#fce8e6">
                    <svg class="icon-svg" viewBox="0 0 24 24">
                        <path d="M19 15v4H5v-4h14m1-2H4c-.55 0-1 .45-1 1v5c0 .55.45 1 1 1h16c.55 0 1-.45 1-1v-5c0-.55-.45-1-1-1zM19 5v4H5V5h14m0-2H5c-1.1 0-2 .9-2 2v4c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"/>
                    </svg>
                    <span class="nav-text">All inboxes</span>
                    <span class="nav-badge" id="badge-all"></span>
                </div>
                
                <div class="divider"></div>

                <div class="nav-item" data-view="primary" data-color="#d93025" data-bg="#fce8e6">
                    <svg class="icon-svg" viewBox="0 0 24 24">
                        <path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 14H4V8l8 5 8-5v10zm-8-7L4 6h16l-8 5z"/>
                    </svg>
                    <span class="nav-text">Primary</span>
                    <span class="nav-badge" id="badge-primary"></span>
                </div>

                <div class="nav-item" data-view="social" data-color="#1a73e8" data-bg="#e8f0fe">
                    <svg class="icon-svg" viewBox="0 0 24 24">
                        <path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/>
                    </svg>
                    <span class="nav-text">Social</span>
                    <span class="nav-badge" id="badge-social"></span>
                </div>

                <div class="nav-item" data-view="promotions" data-color="#188038" data-bg="#e6f4ea">
                    <svg class="icon-svg" viewBox="0 0 24 24">
                        <path d="M21.41 11.58l-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58.55 0 1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41 0-.55-.23-1.06-.59-1.42zM5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7z"/>
                    </svg>
                    <span class="nav-text">Promotions</span>
                    <span class="nav-badge" id="badge-promotions"></span>
                </div>
                
                 <div class="nav-item" data-view="purchases" data-color="#f4b400" data-bg="#fef7e0">
                    <svg class="icon-svg" viewBox="0 0 24 24">
                        <path d="M18 6h-2c0-2.21-1.79-4-4-4S8 3.79 8 6H6c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm-6-2c1.1 0 2 .9 2 2h-4c0-1.1.9-2 2-2zm6 14H6V8h2v2c0 .55.45 1 1 1s1-.45 1-1V8h4v2c0 .55.45 1 1 1s1-.45 1-1V8h2v10z"/>
                    </svg>
                    <span class="nav-text">Purchases</span>
                    <span class="nav-badge" id="badge-purchases"></span>
                </div>

                <div class="divider"></div>

                <div class="nav-item" data-view="starred" data-color="#5f6368" data-bg="#f1f3f4">
                    <svg class="icon-svg" viewBox="0 0 24 24">
                        <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/>
                    </svg>
                    <span class="nav-text">Starred</span>
                </div>
                
                <div class="nav-item" data-view="bin" data-color="#5f6368" data-bg="#f1f3f4">
                    <svg class="icon-svg" viewBox="0 0 24 24">
                        <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
                    </svg>
                    <span class="nav-text">Bin</span>
                    <span class="nav-badge" id="badge-bin"></span>
                </div>
            </div>
        </aside>

        <header class="header">
            <div class="search-container">
                <div class="menu-icon" id="openMenu">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="#5f6368">
                        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                    </svg>
                </div>
                <input type="text" class="search-input" id="searchInput" placeholder="Search in mail">
                <div class="pfp-btn" id="openProfile">A</div>
            </div>
            
            <div class="profile-dropdown" id="profileDropdown">
                <p class="profile-email-text">aaradhya@lovedbyNiv.com</p>
                <div class="profile-ring-box">
                    <div class="profile-ring"></div>
                    <div class="profile-avatar-large">A</div>
                </div>
                <h1 class="profile-hi">Hi, Aaradhya!</h1>
            </div>
        </header>

        <main style="flex: 1; overflow-y: auto; position: relative;">
            <div id="emailListView" class="view-visible email-list-container">
                <div class="ai-overview" id="aiOverview">
                    <div class="ai-header">
                        <svg class="ai-sparkle" viewBox="0 0 24 24" fill="url(#sparkleGradient)">
                            <defs>
                                <linearGradient id="sparkleGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" style="stop-color:#4285f4;stop-opacity:1" />
                                    <stop offset="50%" style="stop-color:#ea4335;stop-opacity:1" />
                                    <stop offset="100%" style="stop-color:#fbbc05;stop-opacity:1" />
                                </linearGradient>
                            </defs>
                            <path d="M12 2L14.5 9.5L22 12L14.5 14.5L12 22L9.5 14.5L2 12L9.5 9.5L12 2Z"/>
                            <path d="M19 3L19.5 4.5L21 5L19.5 5.5L19 7L18.5 5.5L17 5L18.5 4.5L19 3Z"/>
                        </svg>
                        <span class="ai-title">Gemini</span>
                        <svg class="ai-chevron" viewBox="0 0 24 24">
                            <path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/>
                        </svg>
                    </div>
                    <div class="ai-content">
                        You are logged in as Aaradhya. Summary: Niv thinks you're the smartest person on earth, Stitch is judging his life choices, and the lipstick tutorial screenshot is his favorite image ever.
                    </div>
                </div>

                <div class="category-label" id="categoryLabel">All inboxes</div>
                <div id="emailList"></div>
            </div>

            <div id="emailDetailView" class="email-detail">
                <div class="detail-header-bar">
                    <div class="back-btn" onclick="closeEmail()">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="#5f6368">
                            <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
                        </svg>
                    </div>
                    <div class="detail-actions">
                        <div class="action-btn">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="#5f6368">
                                <path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/>
                            </svg>
                        </div>
                    </div>
                </div>

                <div class="detail-subject-header">
                    <div class="subject-container">
                        <span class="detail-subject-text" id="detailSubject"></span>
                        <span class="detail-inbox-label">Inbox</span>
                    </div>
                    <div class="detail-star" id="detailStarBtn">
                        <svg class="star-svg" id="detailStarSvg" viewBox="0 0 24 24">
                            <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/>
                        </svg>
                    </div>
                </div>

                <div class="detail-sender-row">
                    <div class="sender-avatar-detail" id="detailAvatar"></div>
                    <div class="sender-info-detail">
                        <div class="sender-name-detail" id="detailSender"></div>
                        <div class="sender-to">to me</div>
                    </div>
                    <div class="detail-time" id="detailTime"></div>
                </div>

                <div id="illustrationContainer"></div>
                <div class="detail-body" id="detailBody"></div>
            </div>
        </main>
    </div>

    <script>
        const emailDatabase = {
            // PRIMARY EMAILS
            primary: [
                {
                    id: 'p1',
                    sender: 'Niv',
                    subject: 'That lipstick tutorial...',
                    snippet: 'I’m not even talking about the makeup. I’m talking about you.',
                    time: '10:04 AM',
                    avatar: 'N',
                    color: '#e91e63',
                    starred: true,
                    body: `<p>Hey,</p>
                    <p>I know the point of that call was to teach me the difference between a lip liner and a crayon (I still don't totally get it), but I was barely listening to the instructions.</p>
                    <p>I was just watching you. The way you focus when you're looking in the mirror, that little tilt of your chin... you looked so confident. It was honestly mesmerizing. You were glowing through the screen.</p>
                    <p>I took a screenshot. I'm not sorry. It's my favorite photo now.</p>
                    <p>- Niv</p>`
                },
                {
                    id: 'p2',
                    sender: 'The Love Yorker',
                    subject: 'Essay: The Science of Missing Someone You Haven\'t Met',
                    snippet: 'Why 2083km feels like both infinity and nothing.',
                    time: 'Yesterday',
                    avatar: 'LY',
                    color: '#333',
                    starred: true,
                    illustration: `<svg viewBox="0 0 400 200" xmlns="http://www.w3.org/2000/svg">
                        <rect fill="#fff" width="400" height="200"/>
                        <text x="200" y="40" text-anchor="middle" font-family="Times New Roman" font-size="24">THE LOVE YORKER</text>
                        <path d="M100 120 Q 200 60 300 120" stroke="#000" stroke-width="1" fill="none" stroke-dasharray="5,5"/>
                        <circle cx="100" cy="120" r="4" fill="#000"/>
                        <circle cx="300" cy="120" r="4" fill="none" stroke="#000"/>
                        <text x="200" y="150" text-anchor="middle" font-family="Georgia" font-size="12" font-style="italic">Connection Established.</text>
                    </svg>`,
                    body: `<div style="font-family: Georgia, serif; max-width: 600px; margin: 0 auto; line-height: 1.8;">
                        <h2 style="font-style: italic; text-align: center;">The Science of Missing Someone You Haven't Met</h2>
                        <p>It’s a weird paradox. I know exactly how you take your coffee. I know your opinions on Draco Malfoy (justified) and your rant about genetically modified space plants (brilliant). I know your mind better than I know my own sometimes.</p>
                        <p>But I don't know how tall you really feel standing next to me. I don't know if you walk fast or slow. I don't know the temperature of your hands.</p>
                        <p>We are building a castle out of voice notes and pixels. It’s a great castle. I just really want to open the front door and actually walk in.</p>
                    </div>`
                },
                {
                    id: 'p3',
                    sender: 'Niv',
                    subject: 'Space plants & why you are smarter than me',
                    snippet: 'Still thinking about that FaceTime rant. "Easier to change ourselves..."',
                    time: 'Feb 12',
                    avatar: 'N',
                    color: '#3f51b5',
                    starred: true,
                    body: `<p>I was driving today and saw a weird tree and immediately thought of your space plant rant.</p>
                    <p><em>"It's easier to change ourselves than our surroundings sometimes."</em></p>
                    <p>That line has been stuck in my head. You were so passionate explaining how we should modify plants for space rather than terraforming planets. You looked so intense. I love that your brain works like that.</p>
                    <p>Most people talk about the weather. You talk about bio-ethics in zero gravity. God, you're cool.</p>`
                },
                {
                    id: 'p4',
                    sender: 'Niv',
                    subject: 'Stitch is being a roommate from hell',
                    snippet: 'He knocked over my water. Again.',
                    time: 'Feb 12',
                    avatar: 'N',
                    color: '#795548',
                    starred: false,
                    body: `<p>Update on the cat situation:</p>
                    <p>Stitch looked me dead in the eye and pushed my water glass off the table. He didn't even run away. He just sat there judging me.</p>
                    <p>I told him "Aaradhya wouldn't let you do that," and he meowed. I think he misses you. Or he just knows I'm a pushover. Probably both.</p>`
                },
                {
                    id: 'p5',
                    sender: 'Niv',
                    subject: 'F1 / Ferrari pain',
                    snippet: 'Why do I support this team? Why?',
                    time: 'Feb 11',
                    avatar: 'N',
                    color: '#d32f2f',
                    starred: false,
                    body: `<p>Qualifying is in an hour.</p>
                    <p>I am ready to be hurt again. Ferrari strategy team is basically a random number generator at this point.</p>
                    <p>If I start texting in all caps later, just ignore me. Or send calming biology facts.</p>`
                },
                {
                    id: 'p6',
                    sender: 'Letterboxd',
                    subject: 'Niv logged "Harry Potter & The Half-Blood Prince"',
                    snippet: 'Rating: 4 Stars. "Rewatching because she quoted it."',
                    time: 'Feb 10',
                    avatar: 'LB',
                    color: '#00e054',
                    starred: false,
                    body: `<p><strong>Watched:</strong> Half-Blood Prince</p>
                    <p><strong>Review:</strong> "Aaradhya is right, the color grading is too dark. But the vibes are immaculate. Wish we were watching this together so she could explain the book differences in real time."</p>`
                },
                {
                    id: 'p7',
                    sender: 'Niv',
                    subject: 'Exam check-in (Don\'t stress)',
                    snippet: 'Just a reminder that you are a genius.',
                    time: 'Feb 09',
                    avatar: 'N',
                    color: '#009688',
                    starred: true,
                    body: `<p>Hey,</p>
                    <p>I know the boards prep is intense right now. Just wanted to remind you that you're literally the smartest person I know.</p>
                    <p>Take a break. Eat something that isn't instant noodles. Go look at the sky for 5 minutes.</p>
                    <p>You got this. I'm rooting for you from 2083km away.</p>`
                },
                {
                    id: 'p8',
                    sender: 'Strava',
                    subject: 'Niv titled a run: "Running to clear my head"',
                    snippet: '5km • "Humid evening, good pace"',
                    time: 'Feb 08',
                    avatar: 'ST',
                    color: '#fc4c02',
                    starred: false,
                    body: `<p><strong>Niv finished a run.</strong></p>
                    <p>Tried to beat my 5k time. Failed. Blaming the humidity, but actually I was just distracted thinking about when I can visit.</p>`
                },
                {
                    id: 'p9',
                    sender: 'Niv',
                    subject: 'Your voice',
                    snippet: 'Is it weird to say I miss a sound?',
                    time: 'Feb 07',
                    avatar: 'N',
                    color: '#607d8b',
                    starred: true,
                    body: `<p>It's quiet in my apartment right now and I really miss your voice.</p>
                    <p>Not even saying anything important. just that fast-talking thing you do when you're excited about something. It's my favorite sound.</p>
                    <p>Call me later if you're free?</p>`
                },
                {
                    id: 'p10',
                    sender: 'Niv',
                    subject: 'Momo disappointment',
                    snippet: 'I tried a new place. It was a mistake.',
                    time: 'Feb 06',
                    avatar: 'N',
                    color: '#ff9800',
                    starred: false,
                    body: `<p>I cheated on my usual momo spot. Huge mistake.</p>
                    <p>The wrapper was too thick. The chutney had no kick. I sat there eating it feeling deep regret. I need to come to your city so you can show me what "real" momos taste like, because this wasn't it.</p>`
                },
                {
                    id: 'p11',
                    sender: 'Niv',
                    subject: 'Song link',
                    snippet: 'This came on shuffle and sounded like us.',
                    time: 'Feb 05',
                    avatar: 'N',
                    color: '#1db954',
                    starred: false,
                    body: `<p>Sent you a Spotify link.</p>
                    <p>It's a bit indie/sad but in a good way. Listen to it when you're studying.</p>`
                },
                {
                    id: 'p12',
                    sender: 'Niv',
                    subject: 'Octopus update',
                    snippet: 'I looked it up. They are weird.',
                    time: 'Feb 04',
                    avatar: 'N',
                    color: '#673ab7',
                    starred: false,
                    body: `<p>Remember the octopus conversation? I went down a rabbit hole.</p>
                    <p>They have 9 brains? One for each arm? That seems excessive. I barely have one working brain when I'm talking to you.</p>
                    <p>Biology is wild. You picked a cool field.</p>`
                },
                {
                    id: 'p13',
                    sender: 'Niv',
                    subject: 'Good morning',
                    snippet: 'Hope you slept well.',
                    time: 'Feb 03',
                    avatar: 'N',
                    color: '#00bcd4',
                    starred: false,
                    body: `<p>Morning.</p>
                    <p>Stitch is asleep on my face. Can't move. Send help (or coffee).</p>
                    <p>Have a good study session today.</p>`
                }
            ],
            
            // SOCIAL EMAILS
            social: [
                {
                    id: 's1',
                    sender: 'Instagram',
                    subject: 'Niv sent you a reel',
                    snippet: 'Cat video. Obviously.',
                    time: '11:00 AM',
                    avatar: 'IG',
                    color: '#e91e63',
                    starred: false,
                    body: `<p>Niv sent a reel.</p><p>"This cat looks exactly like Stitch when he's hungry."</p>`
                },
                {
                    id: 's2',
                    sender: 'Strava',
                    subject: 'Kudos on your walk',
                    snippet: 'Niv liked "Mental health walk"',
                    time: 'Yesterday',
                    avatar: 'ST',
                    color: '#fc4c02',
                    starred: false,
                    body: `<p>Niv gave you kudos.</p>`
                },
                {
                    id: 's3',
                    sender: 'Letterboxd',
                    subject: 'Niv liked your review',
                    snippet: 'On "Pride & Prejudice"',
                    time: 'Feb 12',
                    avatar: 'LB',
                    color: '#00e054',
                    starred: false,
                    body: `<p>Niv liked your review.</p>`
                },
                {
                    id: 's4',
                    sender: 'Pinterest',
                    subject: 'Niv saved to "Future Home"',
                    snippet: 'A room with a lot of plants.',
                    time: 'Feb 11',
                    avatar: 'PT',
                    color: '#bd081c',
                    starred: false,
                    body: `<p>He's pinning plant shelves again. He knows you'll need space for your experiments.</p>`
                },
                {
                    id: 's5',
                    sender: 'Spotify',
                    subject: 'Niv added to Blend',
                    snippet: 'New tracks added.',
                    time: 'Feb 10',
                    avatar: 'SP',
                    color: '#1db954',
                    starred: false,
                    body: `<p>Niv added 3 songs. They are all very chill.</p>`
                },
                {
                    id: 's6',
                    sender: 'Niv',
                    subject: 'Mentioned you in a comment',
                    snippet: '"She explains this better than the professor"',
                    time: 'Feb 09',
                    avatar: 'IG',
                    color: '#e91e63',
                    starred: false,
                    body: `<p>On a post about cellular respiration.</p>`
                },
                {
                    id: 's7',
                    sender: 'Twitter',
                    subject: 'Niv liked your reply',
                    snippet: 'To that F1 meme.',
                    time: 'Feb 08',
                    avatar: 'TW',
                    color: '#1da1f2',
                    starred: false,
                    body: `<p>Niv liked your reply.</p>`
                },
                {
                    id: 's8',
                    sender: 'Google Photos',
                    subject: 'New Memory: "Screenshots"',
                    snippet: 'You have 400 items in this folder.',
                    time: 'Feb 07',
                    avatar: 'GP',
                    color: '#fbbc05',
                    starred: false,
                    body: `<p>Mostly blurry faces from video calls.</p>`
                },
                {
                    id: 's9',
                    sender: 'Niv',
                    subject: 'Tagged you',
                    snippet: 'Meme: "Dating a biology student"',
                    time: 'Feb 06',
                    avatar: 'IG',
                    color: '#e91e63',
                    starred: false,
                    body: `<p>"This is literally us."</p>`
                }
            ],
            
            // PROMOTIONS EMAILS
            promotions: [
                {
                    id: 'pr1',
                    sender: 'Skyscanner',
                    subject: 'Price Alert: Your Route',
                    snippet: 'Price unchanged. Sorry.',
                    time: '9:00 AM',
                    avatar: 'SK',
                    color: '#00a698',
                    starred: false,
                    body: `<p>We are watching the flights. Niv checks this page 4 times a day.</p>`
                },
                {
                    id: 'pr2',
                    sender: 'The Cat Store',
                    subject: 'Adoption Event: Meet Ivy & Jackie?',
                    snippet: 'Kittens looking for homes.',
                    time: 'Feb 12',
                    avatar: 'CS',
                    color: '#ff9800',
                    starred: false,
                    body: `<p>Just browsing. For the future. We need to find a Wilson first.</p>`
                },
                {
                    id: 'pr3',
                    sender: 'Coffee House',
                    subject: 'BOGO Offer',
                    snippet: 'Buy one, get one free.',
                    time: 'Feb 10',
                    avatar: 'CH',
                    color: '#795548',
                    starred: false,
                    body: `<p>Offer valid only in person. Which is rude, considering the 2083km.</p>`
                },
                {
                    id: 'pr4',
                    sender: 'Wizarding World',
                    subject: 'New Wand Collection',
                    snippet: 'Ravenclaw editions back in stock.',
                    time: 'Feb 08',
                    avatar: 'WW',
                    color: '#3f51b5',
                    starred: false,
                    body: `<p>You definitely need a new wand for the collection.</p>`
                },
                {
                    id: 'pr5',
                    sender: 'Netflix',
                    subject: 'New Arrival: Gilmore Girls',
                    snippet: 'Watch it again?',
                    time: 'Feb 06',
                    avatar: 'NF',
                    color: '#e50914',
                    starred: false,
                    body: `<p>You've watched it 10 times. Make it 11.</p>`
                },
                {
                    id: 'pr6',
                    sender: 'Stationery World',
                    subject: 'Highlighters Sale',
                    snippet: 'For your exam prep.',
                    time: 'Feb 04',
                    avatar: 'SW',
                    color: '#ffeb3b',
                    starred: false,
                    body: `<p>Pastel highlighters. Your weakness.</p>`
                }
            ],
            
            // PURCHASES
            purchases: [
                {
                    id: 'pur1',
                    sender: 'Uber',
                    subject: 'Receipt: Airport Drop (Manifesting)',
                    snippet: 'One day. Not today, but one day.',
                    time: 'Feb 13',
                    avatar: 'UB',
                    color: '#000',
                    starred: false,
                    isPurchase: true,
                    purchaseData: {
                        product: 'Ride to Airport',
                        quantity: '1',
                        vendor: 'Uber Dreams',
                        orderNumber: 'UBER-FUTURE',
                        orderDate: 'Pending',
                        delivery: 'Someday',
                        status: 'Dreaming'
                    },
                    body: `<p>I am manifesting this. The car ride to come see you.</p>`
                },
                {
                    id: 'pur2',
                    sender: 'Spotify',
                    subject: 'Receipt: Premium Duo',
                    snippet: 'Invited Aaradhya.',
                    time: 'Feb 11',
                    avatar: 'SP',
                    color: '#1db954',
                    starred: false,
                    isPurchase: true,
                    purchaseData: {
                        product: 'Premium Duo Plan',
                        quantity: '1 Month',
                        vendor: 'Spotify',
                        orderNumber: 'SPOT-DUO-01',
                        orderDate: 'Feb 11, 2026',
                        delivery: 'Digital',
                        status: 'Active'
                    },
                    body: `<p>No more ads interrupting our shared sad boy hours.</p>`
                },
                {
                    id: 'pur3',
                    sender: 'Amazon',
                    subject: 'Order: "Board Exam Stress Ball"',
                    snippet: 'Sent to your address.',
                    time: 'Feb 09',
                    avatar: 'AM',
                    color: '#ff9900',
                    starred: false,
                    isPurchase: true,
                    purchaseData: {
                        product: 'Squishy Cat Toy',
                        quantity: '1',
                        vendor: 'Amazon',
                        orderNumber: 'AMZ-999',
                        orderDate: 'Feb 09, 2026',
                        delivery: 'Shipped',
                        status: 'On the way'
                    },
                    body: `<p>Something to squeeze when physics gets annoying.</p>`
                },
                {
                    id: 'pur4',
                    sender: 'Future Plans Inc.',
                    subject: 'Order: "Ivy, Jackie, Wilson"',
                    snippet: 'Reservation for 3 cats.',
                    time: 'Feb 07',
                    avatar: 'FP',
                    color: '#607d8b',
                    starred: false,
                    isPurchase: true,
                    purchaseData: {
                        product: 'Three Cats',
                        quantity: '3',
                        vendor: 'Shelter',
                        orderNumber: 'CATS-2027',
                        orderDate: 'Future',
                        delivery: 'Pending',
                        status: 'Goal'
                    },
                    body: `<p>Just keeping the dream alive. Stitch needs friends.</p>`
                },
                {
                    id: 'pur5',
                    sender: 'Data Provider',
                    subject: 'Top Up: Video Calls',
                    snippet: 'Unlimited data plan.',
                    time: 'Feb 05',
                    avatar: 'DP',
                    color: '#2196f3',
                    starred: false,
                    isPurchase: true,
                    purchaseData: {
                        product: '5G Data Add-on',
                        quantity: 'Unlimited',
                        vendor: 'Jio',
                        orderNumber: 'DATA-001',
                        orderDate: 'Feb 05, 2026',
                        delivery: 'Instant',
                        status: 'Active'
                    },
                    body: `<p>So the video doesn't lag when you're talking.</p>`
                }
            ],
            
            // BIN / DRAFTS
            bin: [
                {
                    id: 'b1',
                    sender: 'Draft: Anxiety',
                    subject: 'What if...',
                    snippet: 'What if we meet and it’s awkward?',
                    time: 'Feb 14',
                    avatar: 'N',
                    color: '#ccc',
                    starred: false,
                    body: `<p>Deleted. It won't be awkward. We talk for 6 hours a day. It'll be fine. Shut up brain.</p>`
                },
                {
                    id: 'b2',
                    sender: 'Draft: Bad Joke',
                    subject: 'Are you a mitochondria?',
                    snippet: 'Because you are the powerhouse of my...',
                    time: 'Feb 12',
                    avatar: 'N',
                    color: '#ccc',
                    starred: false,
                    body: `<p>This is too cringey even for me. Deleting before I send it and get blocked.</p>`
                },
                {
                    id: 'b3',
                    sender: 'Draft: Impulse Buy',
                    subject: 'Flight Booking (Unsent)',
                    snippet: 'I almost clicked buy.',
                    time: 'Feb 10',
                    avatar: 'N',
                    color: '#ccc',
                    starred: false,
                    body: `<p>I had the dates selected. But you have exams. And I have rent. Being an adult is the worst.</p>`
                },
                {
                    id: 'b4',
                    sender: 'Draft: Too Honest',
                    subject: 'I hate this',
                    snippet: 'I hate the distance today.',
                    time: 'Feb 08',
                    avatar: 'N',
                    color: '#ccc',
                    starred: false,
                    body: `<p>Not sending this. No point complaining. It is what it is. But ugh.</p>`
                },
                {
                    id: 'b5',
                    sender: 'Draft: 3AM thoughts',
                    subject: 'You know what...',
                    snippet: 'Rambling about space plants.',
                    time: 'Feb 06',
                    avatar: 'N',
                    color: '#ccc',
                    starred: false,
                    body: `<p>I was going to write a whole theory about your space plant idea but I need to sleep.</p>`
                }
            ]
        };

        const allEmails = [
            ...emailDatabase.primary, 
            ...emailDatabase.social, 
            ...emailDatabase.promotions,
            ...emailDatabase.purchases,
            ...emailDatabase.spam,
            ...emailDatabase.bin
        ];
        
        let currentCategory = 'all-inboxes';
        let currentEmails = allEmails;

        function updateBadges() {
            document.getElementById('badge-primary').textContent = emailDatabase.primary.length;
            document.getElementById('badge-social').textContent = emailDatabase.social.length;
            document.getElementById('badge-promotions').textContent = emailDatabase.promotions.length;
            document.getElementById('badge-purchases').textContent = emailDatabase.purchases.length;
            document.getElementById('badge-bin').textContent = emailDatabase.bin.length;
            
            const allReadable = [...emailDatabase.primary, ...emailDatabase.social, ...emailDatabase.promotions, ...emailDatabase.purchases];
            document.getElementById('badge-all').textContent = allReadable.length;
        }

        document.getElementById('aiOverview').onclick = function() {
            this.classList.toggle('expanded');
        };

        function renderEmails(filterText = '') {
            const container = document.getElementById('emailList');
            container.innerHTML = '';
            
            const aiOverview = document.getElementById('aiOverview');
            if(currentCategory === 'all-inboxes' && filterText === '') {
                aiOverview.style.display = 'block';
            } else {
                aiOverview.style.display = 'none';
            }
            
            const filtered = currentEmails.filter(e => 
                e.sender.toLowerCase().includes(filterText.toLowerCase()) || 
                e.subject.toLowerCase().includes(filterText.toLowerCase())
            );

            filtered.forEach(email => {
                const item = document.createElement('div');
                item.className = 'email-item';
                item.onclick = (e) => {
                    if(!e.target.closest('.star-icon')) openEmail(email.id);
                };

                const starClass = email.starred ? 'starred' : '';

                item.innerHTML = `
                    <div class="avatar-circle" style="background: ${email.color};">${email.avatar}</div>
                    <div class="email-content-main">
                        <div class="email-first-line">
                            <span class="sender-name">${email.sender}</span>
                            <span class="email-time">${email.time}</span>
                        </div>
                        <div class="subject-line">${email.subject}</div>
                        <div class="snippet">${email.snippet}</div>
                    </div>
                    <div class="star-icon" onclick="toggleStar(event, '${email.id}')">
                        <svg class="star-svg ${starClass}" viewBox="0 0 24 24">
                            <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/>
                        </svg>
                    </div>
                `;
                container.appendChild(item);
            });
            
            if (filtered.length === 0) {
                container.innerHTML = '<div style="padding: 40px; text-align: center; color: #5f6368;">No mails found.</div>';
            }
        }

        function toggleStar(e, id) {
            e.stopPropagation();
            const email = allEmails.find(x => x.id === id);
            if (email) {
                email.starred = !email.starred;
                renderEmails(document.getElementById('searchInput').value);
                if(currentCategory === 'starred') {
                    currentEmails = allEmails.filter(e => e.starred);
                    renderEmails();
                }
            }
        }

        function openEmail(id) {
            const email = allEmails.find(e => e.id === id);
            if (!email) return;

            document.getElementById('detailSubject').textContent = email.subject;
            document.getElementById('detailSender').textContent = email.sender;
            document.getElementById('detailTime').textContent = email.time;
            
            const avatar = document.getElementById('detailAvatar');
            avatar.textContent = email.avatar;
            avatar.style.background = email.color;
            
            const starSvg = document.getElementById('detailStarSvg');
            if(email.starred) starSvg.classList.add('starred');
            else starSvg.classList.remove('starred');
            
            const illustrationContainer = document.getElementById('illustrationContainer');
            if (email.illustration) {
                illustrationContainer.innerHTML = `<div class="artistic-illustration">${email.illustration}</div>`;
            } else {
                illustrationContainer.innerHTML = '';
            }
            
            const detailBody = document.getElementById('detailBody');
            
            if (email.isPurchase && email.purchaseData) {
                const p = email.purchaseData;
                const receiptHtml = `
                    <div style="border: 1px solid #e0e0e0; border-radius: 8px; padding: 24px; margin: 20px 0; font-family: 'Roboto', sans-serif; background: #fafafa;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 20px; border-bottom: 1px solid #eee; padding-bottom: 10px;">
                            <span style="font-weight: 500; color: #202124;">Order Confirmation</span>
                            <span style="color: #5f6368;">${p.orderNumber}</span>
                        </div>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 20px; font-size: 14px;">
                            <div>
                                <div style="color: #5f6368; font-size: 12px; margin-bottom: 4px;">Product</div>
                                <div style="font-weight: 500;">${p.product}</div>
                            </div>
                            <div>
                                <div style="color: #5f6368; font-size: 12px; margin-bottom: 4px;">Quantity</div>
                                <div>${p.quantity}</div>
                            </div>
                            <div>
                                <div style="color: #5f6368; font-size: 12px; margin-bottom: 4px;">Date</div>
                                <div>${p.orderDate}</div>
                            </div>
                            <div>
                                <div style="color: #5f6368; font-size: 12px; margin-bottom: 4px;">Status</div>
                                <div style="color: #188038; font-weight: 500;">${p.status}</div>
                            </div>
                        </div>
                         <div style="text-align: center; border-top: 1px dashed #ccc; padding-top: 12px; font-size: 12px; color: #5f6368;">
                            Vendor: ${p.vendor}
                        </div>
                    </div>
                `;
                detailBody.innerHTML = receiptHtml + email.body;
            } else {
                detailBody.innerHTML = email.body;
            }
            
            document.getElementById('emailListView').classList.remove('view-visible');
            document.getElementById('emailListView').classList.add('view-hidden');
            document.getElementById('emailDetailView').classList.add('active');
        }

        function closeEmail() {
            document.getElementById('emailDetailView').classList.remove('active');
            document.getElementById('emailListView').classList.remove('view-hidden');
            document.getElementById('emailListView').classList.add('view-visible');
        }

        document.getElementById('openProfile').onclick = (e) => {
            e.stopPropagation();
            document.getElementById('profileDropdown').classList.toggle('active');
        };
        
        document.addEventListener('click', (e) => {
            const dropdown = document.getElementById('profileDropdown');
            if (!dropdown.contains(e.target) && !document.getElementById('openProfile').contains(e.target)) {
                dropdown.classList.remove('active');
            }
        });

        document.getElementById('openMenu').onclick = () => { 
            document.getElementById('sidebar').classList.add('open'); 
            document.getElementById('overlay').classList.add('active'); 
        };
        
        document.getElementById('overlay').onclick = () => { 
            document.getElementById('sidebar').classList.remove('open'); 
            document.getElementById('overlay').classList.remove('active'); 
        };

        const root = document.documentElement;
        document.querySelectorAll('.nav-item').forEach(item => {
            item.onclick = () => {
                document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
                item.classList.add('active');

                const view = item.getAttribute('data-view');
                const color = item.getAttribute('data-color');
                const bg = item.getAttribute('data-bg');
                
                if(color && bg) {
                    root.style.setProperty('--primary-color', color);
                    root.style.setProperty('--active-bg', bg);
                }

                const text = item.querySelector('.nav-text').textContent;
                document.getElementById('categoryLabel').textContent = text;
                
                currentCategory = view;
                
                if (view === 'all-inboxes') {
                    currentEmails = allEmails.filter(e => !emailDatabase.bin.includes(e) && !emailDatabase.spam.includes(e));
                } else if (view === 'primary') {
                    currentEmails = emailDatabase.primary;
                } else if (view === 'social') {
                    currentEmails = emailDatabase.social;
                } else if (view === 'promotions') {
                    currentEmails = emailDatabase.promotions;
                } else if (view === 'purchases') {
                    currentEmails = emailDatabase.purchases;
                } else if (view === 'starred') {
                    currentEmails = allEmails.filter(e => e.starred);
                } else if (view === 'bin') {
                    currentEmails = emailDatabase.bin;
                } else {
                    currentEmails = [];
                }
                
                renderEmails();

                document.getElementById('sidebar').classList.remove('open');
                document.getElementById('overlay').classList.remove('active');
            };
        });

        document.getElementById('searchInput').addEventListener('input', (e) => {
            renderEmails(e.target.value);
        });

        // Initial render
        currentEmails = allEmails.filter(e => !emailDatabase.bin.includes(e) && !emailDatabase.spam.includes(e));
        updateBadges();
        renderEmails();
    </script>
</body>
</html>