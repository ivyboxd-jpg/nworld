<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>Gmail</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Georgia:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #d93025;
            --active-bg: #fce8e6;
            --text-primary: #202124;
            --text-secondary: #5f6368;
            --border-color: #e0e0e0;
            --search-bg: #e3e7ed;
            --g-blue: #4285f4; --g-red: #ea4335; --g-yellow: #fbbc05; --g-green: #34a853;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin: 0; padding: 0; }
        html, body { width: 100%; height: 100%; overflow: hidden; background: #fff; font-family: 'Roboto', sans-serif; }

        .app-shell { width: 100%; height: 100%; display: flex; flex-direction: column; position: relative; }

        /* Header */
        .header { padding: 16px; background: #f5f7fa; z-index: 100; }
        .search-container { height: 56px; background: var(--search-bg); border-radius: 28px; display: flex; align-items: center; padding: 0 16px; box-shadow: 0 1px 2px rgba(0,0,0,0.05); }
        .menu-icon { width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; cursor: pointer; margin-right: 16px; }
        .search-input { flex: 1; font-size: 16px; color: #3c4043; background: transparent; border: none; outline: none; font-family: 'Roboto', sans-serif; font-weight: 400; }
        .pfp-btn { width: 32px; height: 32px; background: var(--g-blue); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 500; font-size: 14px; cursor: pointer; margin-left: 12px; }

        /* Profile Dropdown */
        .profile-dropdown { position: fixed; top: 80px; right: 16px; width: 300px; background: #e9eef6; border-radius: 28px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); padding: 32px 20px; z-index: 999; display: none; text-align: center; }
        .profile-dropdown.active { display: block; }
        .modal-email { font-size: 14px; color: #1f1f1f; margin-bottom: 24px; font-weight: 400; }
        .ring-box { width: 88px; height: 88px; margin: 0 auto 20px; position: relative; display: flex; align-items: center; justify-content: center; }
        .pfp-ring { position: absolute; inset: 0; border-radius: 50%; padding: 3.5px; background: conic-gradient(var(--g-blue) 0% 25%, var(--g-red) 25% 50%, var(--g-yellow) 50% 75%, var(--g-green) 75% 100%); -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0); -webkit-mask-composite: xor; mask-composite: exclude; }
        .profile-avatar-large { width: 74px; height: 74px; border-radius: 50%; background: var(--g-blue); display: flex; align-items: center; justify-content: center; font-size: 30px; font-weight: 500; color: white; }
        .profile-hi { font-size: 26px; font-weight: 400; color: #1f1f1f; letter-spacing: -0.5px; }

        /* Sidebar */
        .sidebar-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.4); z-index: 200; opacity: 0; visibility: hidden; transition: 0.25s; }
        .sidebar-overlay.active { opacity: 1; visibility: visible; }
        .sidebar { position: fixed; top: 0; bottom: 0; left: 0; width: 285px; background: #fff; z-index: 250; transform: translateX(-100%); transition: transform 0.28s cubic-bezier(0.4, 0, 0.2, 1); display: flex; flex-direction: column; border-radius: 0 16px 16px 0; }
        .sidebar.open { transform: translateX(0); }
        .sidebar-header { padding: 20px 24px; display: flex; align-items: center; gap: 14px; }
        .sidebar-logo { height: 24px; width: auto; }
        .sidebar-logo-text { font-size: 22px; color: #5f6368; font-weight: 400; }
        .nav-list { overflow-y: auto; padding: 8px 0; }
        .nav-item { height: 48px; display: flex; align-items: center; padding: 0 24px; gap: 24px; cursor: pointer; color: var(--text-secondary); border-radius: 0 24px 24px 0; margin-right: 8px; margin-bottom: 2px; }
        .icon-svg { width: 24px; height: 24px; fill: #5f6368; }
        .nav-text { flex: 1; font-size: 14px; font-weight: 500; }
        .nav-badge { font-size: 12px; font-weight: 500; }
        .divider { height: 1px; background: #e0e0e0; margin: 8px 0; }

        /* Sidebar Active State Colors */
        .nav-item.all-inboxes.active { background: #fce8e6; color: #d93025; }
        .nav-item.all-inboxes.active .icon-svg { fill: #d93025; }
        .nav-item.primary.active { background: #e8f0fe; color: #1a73e8; }
        .nav-item.primary.active .icon-svg { fill: #1a73e8; }
        .nav-item.social.active { background: #e2f2f1; color: #00695c; }
        .nav-item.social.active .icon-svg { fill: #00695c; }
        .nav-item.promotions.active { background: #e6f4ea; color: #188038; }
        .nav-item.promotions.active .icon-svg { fill: #188038; }
        .nav-item.updates.active { background: #70584b; color: #fce8e6; }
        .nav-item.updates.active .icon-svg { fill: #fce8e6; }
        .nav-item.purchases.active { background: #f1f3f4; color: #202124; }
        .nav-item.purchases.active .icon-svg { fill: #202124; }

        /* Content List */
        .category-label { padding: 20px 16px 8px; font-size: 12px; text-transform: uppercase; letter-spacing: 1px; color: #5f6368; font-weight: 500; }
        .email-item { display: flex; align-items: flex-start; padding: 16px; cursor: pointer; background: #fff; gap: 16px; border-bottom: 1px solid #f1f1f1; }
        .avatar-circle { width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 500; font-size: 18px; color: white; flex-shrink: 0; }
        .email-content-main { flex: 1; min-width: 0; }
        .email-first-line { display: flex; justify-content: space-between; align-items: center; margin-bottom: 2px; }
        .sender-name { font-size: 14px; font-weight: 700; color: #202124; }
        .email-time { font-size: 12px; color: #5f6368; }
        .subject-line { font-size: 14px; font-weight: 500; color: #202124; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; margin-bottom: 2px; }
        .snippet { font-size: 13px; color: #5f6368; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
        .star-icon { width: 24px; display: flex; align-items: center; justify-content: center; margin-top: 2px; }
        .star-svg { width: 20px; height: 20px; fill: none; stroke: #5f6368; stroke-width: 2; transition: 0.2s; }
        .star-svg.starred { fill: #fbbc05; stroke: #fbbc05; }

        /* Gemini Banner */
        .ai-overview { margin: 16px; background: #f0f4f9; border-radius: 16px; padding: 16px; cursor: pointer; }
        .ai-header { display: flex; align-items: center; gap: 12px; }
        .ai-sparkle { width: 20px; height: 20px; }
        .ai-title { flex: 1; font-size: 15px; font-weight: 500; color: #0b57d0; }
        .ai-chevron { width: 18px; height: 18px; fill: #5f6368; transition: 0.2s; }
        .ai-overview.expanded .ai-chevron { transform: rotate(180deg); }
        .ai-content { display: none; margin-top: 12px; font-size: 14px; line-height: 1.5; color: #1f1f1f; }
        .ai-overview.expanded .ai-content { display: block; }

        /* Purchase Line Item */
        .purchase-row { display: flex; align-items: center; gap: 8px; margin-top: 4px; }
        .order-icon { width: 16px; height: 16px; fill: #5f6368; }
        .order-text { font-size: 14px; color: #202124; }
        .inbox-tag-small { border: 1px solid #dadce0; color: #5f6368; font-size: 11px; padding: 1px 4px; border-radius: 4px; }

        /* Detail View */
        .email-detail { display: none; position: absolute; inset: 0; background: white; z-index: 150; flex-direction: column; overflow-y: auto; }
        .email-detail.active { display: flex; }
        .detail-header-bar { padding: 8px; display: flex; align-items: center; background: #fff; position: sticky; top: 0; }
        .back-btn { width: 48px; height: 48px; display: flex; align-items: center; justify-content: center; cursor: pointer; border-radius: 50%; }
        .subject-line-row { display: flex; align-items: center; gap: 10px; padding: 20px 16px 16px; }
        .subject-text-large { font-size: 20px; font-weight: 400; color: #202124; flex: 1; }
        .detail-sender-row { padding: 0 16px 16px; display: flex; gap: 12px; align-items: center; }
        .sender-avatar-detail { width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 18px; color: white; }
        .detail-body { padding: 24px 16px 100px; line-height: 1.7; font-size: 15px; color: #202124; }

        /* Newsletter Header Style */
        .newsletter-hero { text-align: center; padding: 32px 0; border-bottom: 1px solid #eee; margin-bottom: 24px; }
        .news-brand { font-family: 'Georgia', serif; font-size: 28px; font-weight: 700; font-style: italic; }
        .news-issue { font-size: 11px; text-transform: uppercase; color: #888; letter-spacing: 2px; margin-top: 8px; }

        /* Dark Invoice Card */
        .invoice-card-dark { background: #121212; border-radius: 12px; padding: 24px; color: white; margin-top: 20px; }
        .inv-placed-title { font-size: 32px; font-weight: 400; margin-bottom: 20px; }
        .inv-btn { background: #8ab4f8; color: #001d35; border: none; padding: 12px 24px; border-radius: 24px; font-weight: 500; cursor: pointer; }

        .view-hidden { display: none; }
    </style>
</head>
<body>
    <div class="app-shell">
        <div class="sidebar-overlay" id="overlay"></div>
        
        <!-- Sidebar Navigation -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <img src="https://ssl.gstatic.com/ui/v1/icons/mail/rfr/gmail.ico" class="sidebar-logo">
                <span class="sidebar-logo-text">Gmail</span>
            </div>
            <div class="nav-list">
                <div class="nav-item all-inboxes active" data-view="all">
                    <svg class="icon-svg" viewBox="0 0 24 24"><path d="M19 15v4H5v-4h14m1-2H4c-.55 0-1 .45-1 1v5c0 .55.45 1 1 1h16c.55 0 1-.45 1-1v-5c0-.55-.45-1-1-1zM19 5v4H5V5h14m0-2H5c-1.1 0-2 .9-2 2v4c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"/></svg>
                    <span class="nav-text">All inboxes</span>
                </div>
                <div class="divider"></div>
                <div class="nav-item primary" data-view="primary">
                    <svg class="icon-svg" viewBox="0 0 24 24"><path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 14H4V8l8 5 8-5v10z"/></svg>
                    <span class="nav-text">Primary</span>
                </div>
                <div class="nav-item social" data-view="social">
                    <svg class="icon-svg" viewBox="0 0 24 24"><path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/></svg>
                    <span class="nav-text">Social</span>
                </div>
                <div class="nav-item promotions" data-view="promotions">
                    <svg class="icon-svg" viewBox="0 0 24 24"><path d="M21.41 11.58l-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58.55 0 1.05-.22 1.41-.59l7-7z"/></svg>
                    <span class="nav-text">Promotions</span>
                </div>
                <div class="nav-item updates" data-view="updates">
                    <svg class="icon-svg" viewBox="0 0 24 24"><path d="M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z"/></svg>
                    <span class="nav-text">Updates</span>
                </div>
                <div class="divider"></div>
                <div class="nav-item starred" data-view="starred">
                    <svg class="icon-svg" viewBox="0 0 24 24"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/></svg>
                    <span class="nav-text">Starred</span>
                </div>
                <div class="nav-item purchases" data-view="purchases">
                    <svg class="icon-svg" viewBox="0 0 24 24"><path d="M18 6h-2c0-2.21-1.79-4-4-4S8 3.79 8 6H6c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2z"/></svg>
                    <span class="nav-text">Purchases</span>
                </div>
                <div class="nav-item spam" data-view="spam">
                    <svg class="icon-svg" viewBox="0 0 24 24"><path d="M15.73 3H8.27L3 8.27v7.46L8.27 21h7.46L21 15.73V8.27L15.73 3z"/></svg>
                    <span class="nav-text">Spam</span>
                </div>
                <div class="nav-item bin" data-view="bin">
                    <svg class="icon-svg" viewBox="0 0 24 24"><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12z"/></svg>
                    <span class="nav-text">Bin</span>
                </div>
            </div>
        </aside>
        
        <!-- Search Bar Header -->
        <header class="header">
            <div class="search-container">
                <div class="menu-icon" id="menuBtn">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="#5f6368"><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>
                </div>
                <input type="text" class="search-input" id="searchInput" placeholder="Search in mail">
                <div class="pfp-btn" id="profileBtn">A</div>
            </div>
            
            <div class="profile-dropdown" id="profileDropdown">
                <p class="modal-email">aaradhya@lovedbyNiv.com</p>
                <div class="ring-box">
                    <div class="pfp-ring"></div>
                    <div class="profile-avatar-large">A</div>
                </div>
                <h1 class="profile-hi">Hi, Aaradhya!</h1>
            </div>
        </header>
        
        <!-- Main Content Area -->
        <main style="flex: 1; overflow-y: auto; position: relative;">
            <div id="emailListView" class="view-visible">
                <!-- Gemini Banner -->
                <div class="ai-overview" id="aiOverview">
                    <div class="ai-header">
                        <svg class="ai-sparkle" viewBox="0 0 24 24" fill="url(#g)">
                            <defs><linearGradient id="g" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#4285f4"/><stop offset="50%" style="stop-color:#ea4335"/><stop offset="100%" stop-color="#fbbc05"/></linearGradient></defs>
                            <path d="M12 2L14.85 9.15L22 12L14.85 14.85L12 22L9.15 14.85L2 12L9.15 9.15L12 2Z M19 3L19.7 4.7L21.4 5.4L19.7 6.1L19 7.8L18.3 6.1L16.6 5.4L18.3 4.7L19 3Z"/>
                        </svg>
                        <span class="ai-title">Gemini Overview</span>
                        <svg class="ai-chevron" viewBox="0 0 24 24"><path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/></svg>
                    </div>
                    <div class="ai-content" id="geminiText">
                        You are logged in as Aaradhya, <strong>aaradhya@lovedbyNiv.com</strong>. These are romantic updates released by your boyfriend. Explore by category, contribute to the starred list, search, or visit your heart.
                    </div>
                </div>
                
                <div class="category-label" id="catLabel">All inboxes</div>
                <div id="emailList"></div>
            </div>
            
            <!-- Message Detail View -->
            <div id="emailDetail" class="email-detail">
                <div class="detail-header-bar">
                    <div class="back-btn" id="backBtn">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="#5f6368"><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/></svg>
                    </div>
                </div>
                <div class="subject-line-row">
                    <h2 class="subject-text-large" id="detailSubject"></h2>
                    <span class="inbox-tag-small">Inbox</span>
                    <div class="star-icon" id="detailStar">
                        <svg class="star-svg" id="detailStarSvg" viewBox="0 0 24 24"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/></svg>
                    </div>
                </div>
                <div class="detail-sender-row">
                    <div class="sender-avatar-detail" id="detailAvatar"></div>
                    <div class="sender-info">
                        <div class="sender-name-detail" id="detailSender"></div>
                        <div class="sender-to">to my.queen@forever.com</div>
                    </div>
                    <div style="font-size:12px; color:#5f6368">4:34 PM</div>
                </div>

                <div id="newsletterContent" class="view-hidden">
                    <div class="newsletter-hero">
                        <div class="news-brand" id="artTitle"></div>
                        <div class="news-issue" id="artSub">ISSUE NO. 90 • FEB 2026</div>
                    </div>
                </div>

                <div id="invoiceCard" class="invoice-card-dark view-hidden">
                    <div class="inv-placed-title">Order placed</div>
                    <div style="display:flex; gap:12px; margin-bottom:24px;">
                        <span style="font-size:22px; color:#9aa0a6">#</span>
                        <div>
                            <div style="font-size:13px; font-weight:700;">Order number</div>
                            <div style="font-size:13px; color:#9aa0a6;" id="cNum"></div>
                        </div>
                    </div>
                    <button class="inv-btn" onclick="alert('Verification successful: Status is Forever Yours. ❤️')">View order</button>
                </div>

                <div class="detail-body" id="detailBody"></div>
            </div>
        </main>
    </div>

    <script>
        const emailDatabase = {
            primary: [
                { id: 'p1', sender: 'Niv', subject: 'That thing you said about space and plants', snippet: 'I keep thinking about what you said during our FaceTime...', time: 'Feb 13', avatar: 'N', color: '#ff6b6b', starred: true, isArt: false, body: `<p>Hey,</p><p>I keep thinking about what you said during our FaceTime. You know, about how our resources on Earth are being over-exploited and we have no ways of getting them back, but we have the same elements in space.</p><p>You said we have the same ratio of elements in space as we do on Earth, so instead of trying to make suitable conditions for crops in space, we can genetically modify the plants to thrive in the conditions we already have.</p><p><strong>"It's easier to change ourselves than our surroundings sometimes."</strong></p><p>I couldn't stop thinking about that. Not just because it's brilliant, but because I couldn't stop looking at you while you were saying it. The way your eyes light up when you talk about biology... I was supposed to be focusing, but I was just watching the way you exist in space.</p><p>I love you,<br>Niv</p>` },
                { id: 'p2', sender: 'The Distance Times', subject: 'Breaking: Local Man Still 2083km Away', snippet: 'Situation remains ridiculous, experts report...', time: 'Feb 14', avatar: 'DT', color: '#607d8b', starred: true, isArt: true, artTitle: 'The Distance Times', body: `Reports indicate that a man named Niv has officially spent too many consecutive hours staring at a map. The distance between him and Aaradhya remains at 2,083 kilometers, despite several attempts to will the tectonic plates to shift overnight. This phenomenon, which geographers call "completely unfair," is leading to a local shortage of hand-holding.` },
                { id: 'p3', sender: 'Husband Resources', subject: 'Offer Letter: Senior Cuddling Officer', snippet: 'We are thrilled to extend an offer for the position of...', time: 'Feb 12', avatar: 'HR', color: '#4285f4', starred: false, isArt: true, artTitle: 'OFFER LETTER', body: `Dear Niv,\n\nWe are thrilled to offer you the position of Lifetime CEO of My Heart. Your experience in being perfect and making me smile is unmatched.\n\nBenefits include:\n- Unlimited hand-holding\n- High-priority forehead kisses\n- Premium cuddling support\n\nPlease confirm your acceptance by hugging me next time you see me.` },
                { id: 'p4', sender: 'The Love Yorker', subject: 'On the Peculiar Mathematics of Longing', snippet: 'There is a specific kind of arithmetic that occurs when...', time: 'Feb 11', avatar: 'LY', color: '#3f51b5', starred: true, isArt: true, artTitle: 'THE LOVE YORKER', body: `There is a specific kind of arithmetic that occurs when you are in love with someone who exists in a different set of coordinates. Two thousand and eighty-three kilometers, to be precise. It is a number I have become intimately familiar with, the way one might become familiar with a chronic condition or a particularly persistent song stuck in one's head. The answer is her. The answer has always been her.` },
                { id: 'p5', sender: 'Niv', subject: 'I saw a Golden Retriever today', snippet: 'It was sitting by a cafe looking sad. I related heavily.', time: 'Feb 10', avatar: 'N', color: '#795548', starred: false, isArt: false, body: `<p>Saw a Golden Retriever outside a bakery today. He looked profoundly inconvenienced by the fact that he couldn't get what he wanted right that second. I related heavily. I'm just sitting here, sighing at the fact that 2083km are between me and your laugh.</p>` },
                { id: 'p6', sender: 'Cloud Storage System', subject: 'Alert: Voice Note Capacity Reached', snippet: 'Warning: 60% of device storage is occupied by voice notes...', time: 'Feb 09', avatar: 'SS', color: '#fbbc05', starred: false, isArt: false, body: `<p><strong>CRITICAL ALERT:</strong></p><p>Your boyfriend's phone is currently 60% full of your voice notes. System failure would be preferred over a day without your voice. Please do not stop sending them.</p>` },
                { id: 'p7', sender: 'Love Policy Dept', subject: 'Policy Update: Forehead Kisses', snippet: 'Per new regulation, daily requirements have been increased...', time: 'Feb 08', avatar: 'LP', color: '#34a853', starred: false, isArt: false, body: `<p>Per new regulation 2026-X, the minimum daily requirement for forehead kisses has been increased by 400%. Effective immediately upon arrival at 0km distance.</p>` }
            ],
            social: [
                { id: 's1', sender: 'Daily Appreciation', subject: 'Notification: Niv is thinking about you', snippet: 'Daily quota for being stunning has been reached...', time: 'Feb 14', avatar: 'DA', color: '#1a73e8', starred: false, body: `<p>Niv mentioned you in 47 posts today, mostly under the category "People I am currently obsessed with."</p>` }
            ],
            promotions: [
                { id: 'pr1', sender: 'Hogwarts Express', subject: 'Special Bundle: Harry Potter Marathon', snippet: 'Lifetime supply of movie nights with Niv...', time: 'Feb 12', avatar: 'HE', color: '#d93025', starred: false, body: `<p>Exclusive offer: A lifetime of HP marathons. Includes unlimited popcorn and a dedicated pillow-sharing agreement. Valid for one boyfriend and girlfriend located 0km apart.</p>` }
            ],
            purchases: [
                { id: 'pur1', sender: 'Apple', subject: 'Your invoice from Apple.', snippet: 'Order placed', time: '11 Feb', avatar: 'A', color: '#000', starred: false, isPurchase: true, prod: 'YouTube Music Two-person', num: '3-609046649', body: 'Your receipt is available in your account.' },
                { id: 'pur2', sender: 'Tactile Connection Co.', subject: 'Order Confirmation: Hand-Holding', snippet: 'Order placed', time: '10 Feb', avatar: 'TC', color: '#e91e63', starred: true, isPurchase: true, prod: 'Infinite Hand-Holding Subscription', num: '2083-HEART-002', body: 'Activation scheduled for next reunion.' }
            ],
            spam: [{ id: 'sp1', sender: 'Dating App', subject: '47 New Matches!', snippet: 'Hot singles...', time: 'Feb 09', avatar: 'DA', color: '#999', body: 'You already have someone perfect. Move this to bin.' }],
            bin: [{ id: 'b1', sender: 'Self Doubt', subject: 'Maybe you\'re not enough', snippet: 'What if...', time: 'Feb 08', avatar: 'SD', color: '#666', body: 'AUTO-DELETION ALERT: This is factually incorrect. You are loved beyond measure.' }]
        };

        const ui = {
            currentView: 'all',
            filterText: '',
            
            init() {
                this.render();
                document.getElementById('menuBtn').onclick = () => this.toggleSidebar(true);
                document.getElementById('overlay').onclick = () => this.toggleSidebar(false);
                document.getElementById('profileBtn').onclick = (e) => this.toggleProfile(e);
                document.getElementById('backBtn').onclick = () => this.closeEmail();
                document.getElementById('aiOverview').onclick = (e) => e.currentTarget.classList.toggle('expanded');
                document.getElementById('searchInput').oninput = (e) => { this.filterText = e.target.value; this.render(); };
                
                document.querySelectorAll('.nav-item').forEach(item => {
                    item.onclick = () => {
                        document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
                        item.classList.add('active');
                        this.currentView = item.dataset.view;
                        document.getElementById('catLabel').innerText = item.querySelector('.nav-text').innerText;
                        document.getElementById('aiOverview').style.display = (this.currentView === 'all') ? 'block' : 'none';
                        this.toggleSidebar(false);
                        this.render();
                    }
                });

                document.addEventListener('click', () => document.getElementById('profileDropdown').classList.remove('active'));
            },

            toggleSidebar(open) {
                document.getElementById('sidebar').classList.toggle('open', open);
                document.getElementById('overlay').classList.toggle('active', open);
            },

            toggleProfile(e) {
                e.stopPropagation();
                document.getElementById('profileDropdown').classList.toggle('active');
            },

            render() {
                const container = document.getElementById('emailList');
                container.innerHTML = '';
                
                let data = [];
                if (this.currentView === 'all') {
                    data = [...emailDatabase.primary, ...emailDatabase.social, ...emailDatabase.promotions];
                } else {
                    data = emailDatabase[this.currentView] || [];
                }

                data.filter(e => e.sender.toLowerCase().includes(this.filterText.toLowerCase()) || e.subject.toLowerCase().includes(this.filterText.toLowerCase()))
                .forEach(email => {
                    const item = document.createElement('div');
                    item.className = 'email-item';
                    item.onclick = () => this.openEmail(email);
                    
                    const starClass = email.starred ? 'starred' : '';
                    const subLine = email.isPurchase ? 
                        `<div class="purchase-row"><svg class="order-icon" viewBox="0 0 24 24"><path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"/></svg><span class="order-text">Order placed</span><span class="inbox-tag-small">Inbox</span></div>` :
                        `<div class="snippet">${email.snippet}</div>`;

                    item.innerHTML = `
                        <div class="avatar-circle" style="background: ${email.color}">${email.avatar}</div>
                        <div class="email-content-main">
                            <div class="email-first-line"><span class="sender-name">${email.sender}</span><span class="email-time">${email.time}</span></div>
                            <div class="subject-line">${email.subject}</div>
                            ${subLine}
                        </div>
                        <div class="star-icon" onclick="event.stopPropagation(); this.querySelector('svg').classList.toggle('starred')">
                            <svg class="star-svg ${starClass}" viewBox="0 0 24 24"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/></svg>
                        </div>`;
                    container.appendChild(item);
                });
            },

            openEmail(email) {
                const detail = document.getElementById('emailDetail');
                document.getElementById('detailSubject').innerText = email.subject;
                document.getElementById('detailSender').innerText = email.sender;
                document.getElementById('detailAvatar').innerText = email.avatar;
                document.getElementById('detailAvatar').style.background = email.color;
                document.getElementById('detailBody').innerHTML = email.body;
                
                const starSvg = document.getElementById('detailStarSvg');
                email.starred ? starSvg.classList.add('starred') : starSvg.classList.remove('starred');

                document.getElementById('newsletterContent').classList.toggle('view-hidden', !email.isArt);
                if(email.isArt) document.getElementById('artTitle').innerText = email.artTitle;

                document.getElementById('invoiceCard').classList.toggle('view-hidden', !email.isPurchase);
                if(email.isPurchase) document.getElementById('cNum').innerText = email.num;

                detail.classList.add('active');
            },

            closeEmail() { document.getElementById('emailDetail').classList.remove('active'); }
        };

        ui.init();
    </script>
</body>
</html>
