<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Gmail</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap" rel="stylesheet">
    <style>
        @font-face {
            font-family: 'Google Sans';
            src: url('https://fonts.gstatic.com/s/googlesans/v14/4UaGrENHsxJlGDuGo1OIlL3Kwp5eKQtGBlc.woff2') format('woff2');
        }

        :root {
            --gmail-red: #d93025;
            --gmail-blue: #1a73e8;
            --bg-color: #ffffff;
            --search-bg: #eaf1fb;
            --text-main: #1f1f1f;
            --text-sub: #444746;
            --unread-blue: #c2e7ff;
            --border: #e0e0e0;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Roboto', sans-serif;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            background-color: var(--bg-color);
            height: 100vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        /* --- App Top Bar --- */
        .app-header {
            padding: 8px 16px;
            display: flex;
            align-items: center;
            height: 64px;
        }

        .search-bar {
            flex: 1;
            background: var(--search-bg);
            height: 48px;
            border-radius: 24px;
            display: flex;
            align-items: center;
            padding: 0 16px;
            box-shadow: 0 1px 2px rgba(0,0,0,0.05);
        }

        .search-bar svg { margin-right: 12px; fill: var(--text-sub); }
        .search-bar span { color: var(--text-sub); font-size: 16px; flex: 1; }

        .avatar-circle {
            width: 32px;
            height: 32px;
            background: #7b1fa2;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 500;
            margin-left: 12px;
            font-size: 14px;
        }

        /* --- Category Tabs --- */
        .tabs-container {
            display: flex;
            overflow-x: auto;
            padding: 0 8px;
            border-bottom: 1px solid var(--border);
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        .tabs-container::-webkit-scrollbar { display: none; }

        .tab {
            padding: 12px 16px;
            display: flex;
            align-items: center;
            color: var(--text-sub);
            font-size: 14px;
            font-weight: 500;
            position: relative;
            white-space: nowrap;
        }

        .tab.active { color: var(--gmail-blue); }
        .tab.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 16px;
            right: 16px;
            height: 3px;
            background: var(--gmail-blue);
            border-radius: 3px 3px 0 0;
        }

        /* --- Email List --- */
        .email-scroll {
            flex: 1;
            overflow-y: auto;
            padding-bottom: 80px;
        }

        .email-item {
            display: flex;
            padding: 12px 16px;
            gap: 16px;
            cursor: pointer;
            transition: background 0.1s;
        }

        .email-item.unread { background: #f2f6fc; }
        .email-item:active { background: #e8eaed; }

        .sender-img {
            width: 40px;
            height: 40px;
            background: #e8eaed;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            font-weight: 500;
            color: #444746;
            flex-shrink: 0;
        }

        .email-content { flex: 1; min-width: 0; }

        .email-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2px;
        }

        .sender-name {
            font-size: 16px;
            font-weight: 400;
            color: var(--text-main);
        }
        .unread .sender-name { font-weight: 700; }

        .email-date { font-size: 12px; color: var(--text-sub); }
        .unread .email-date { font-weight: 700; color: var(--gmail-blue); }

        .subject-line {
            font-size: 14px;
            color: var(--text-main);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            margin-bottom: 2px;
        }
        .unread .subject-line { font-weight: 700; }

        .snippet-line {
            font-size: 14px;
            color: var(--text-sub);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .star-icon {
            font-size: 20px;
            color: #c4c7c5;
            margin-left: 8px;
        }
        .star-icon.active { color: #f4b400; }

        /* --- Detail View --- */
        #detail-view {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: white;
            z-index: 100;
            display: none;
            flex-direction: column;
        }

        .detail-header {
            height: 56px;
            display: flex;
            align-items: center;
            padding: 0 8px;
            justify-content: space-between;
        }

        .back-btn { padding: 12px; border-radius: 50%; cursor: pointer; }

        .detail-scroll {
            flex: 1;
            overflow-y: auto;
            padding: 16px;
        }

        .detail-subject {
            font-family: 'Google Sans', sans-serif;
            font-size: 22px;
            color: var(--text-main);
            margin-bottom: 24px;
            display: flex;
            justify-content: space-between;
        }

        .detail-meta {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 24px;
        }

        .detail-body {
            font-size: 16px;
            line-height: 1.5;
            color: #3c4043;
            white-space: pre-wrap;
        }

        /* --- Compose FAB --- */
        .compose-fab {
            position: fixed;
            bottom: 24px;
            right: 24px;
            background: #c2e7ff;
            height: 56px;
            padding: 0 20px;
            border-radius: 16px;
            display: flex;
            align-items: center;
            gap: 12px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            cursor: pointer;
            font-weight: 500;
            color: #001d35;
            z-index: 50;
        }

        /* --- Bottom Navigation --- */
        .bottom-nav {
            height: 64px;
            border-top: 1px solid var(--border);
            display: flex;
            justify-content: space-around;
            align-items: center;
            background: #f6f8fc;
        }

        .nav-icon-box { text-align: center; color: var(--text-sub); font-size: 11px; }
        .nav-icon-box.active { color: #001d35; font-weight: 700; }

        /* --- Compose Modal --- */
        #compose-modal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 85%;
            background: white;
            border-radius: 28px;
            padding: 24px;
            box-shadow: 0 24px 48px rgba(0,0,0,0.3);
            z-index: 1000;
            text-align: center;
        }

        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 999;
        }
    </style>
</head>
<body>

    <!-- Header -->
    <div class="app-header">
        <div class="search-bar">
            <svg width="24" height="24" viewBox="0 0 24 24"><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>
            <span>Search in mail</span>
            <div class="avatar-circle">A</div>
        </div>
    </div>

    <!-- Tabs -->
    <div class="tabs-container">
        <div class="tab active" onclick="setTab('primary', this)">Primary</div>
        <div class="tab" onclick="setTab('social', this)">Social</div>
        <div class="tab" onclick="setTab('promotions', this)">Promotions</div>
        <div class="tab" onclick="setTab('updates', this)">Updates</div>
    </div>

    <!-- Email List -->
    <div class="email-scroll" id="email-container">
        <!-- Emails injected by JS -->
    </div>

    <!-- Compose FAB -->
    <div class="compose-fab" onclick="openCompose()">
        <svg width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M20.41 4.94l-1.35-1.35c-.78-.78-2.05-.78-2.83 0L13.4 6.41 3 16.82V21h4.18l10.41-10.41 2.82-2.82c.78-.78.78-2.05 0-2.83zm-14.15 14.1l-1.26-1.26 1.1-1.1 1.26 1.26-1.1 1.1zm1.14-1.14L6.14 16.64 16.55 6.23l1.26 1.26L7.4 16.67z"/></svg>
        Compose
    </div>

    <!-- Bottom Nav -->
    <div class="bottom-nav">
        <div class="nav-icon-box active">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 14H4V8l8 5 8-5v10zm-8-7L4 6h16l-8 5z"/></svg>
            <div>Mail</div>
        </div>
        <div class="nav-icon-box">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M15 10l5-5v14l-5-5H5V10h10z"/></svg>
            <div>Meet</div>
        </div>
    </div>

    <!-- Detail View -->
    <div id="detail-view">
        <div class="detail-header">
            <div class="back-btn" onclick="closeDetail()">
                <svg width="24" height="24" viewBox="0 0 24 24"><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/></svg>
            </div>
            <div style="display:flex; gap: 20px; padding-right: 16px;">
                <svg width="24" height="24" viewBox="0 0 24 24"><path d="M19 4h-3.5l-1-1h-5l-1 1H5v2h14V4zM6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12z"/></svg>
                <svg width="24" height="24" viewBox="0 0 24 24"><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/></svg>
            </div>
        </div>
        <div class="detail-scroll">
            <div class="detail-subject" id="det-subject"></div>
            <div class="detail-meta">
                <div class="sender-img" id="det-avatar" style="background:#f44336; color:white;">N</div>
                <div style="flex:1">
                    <div style="display:flex; justify-content:space-between">
                        <span style="font-weight:700" id="det-sender"></span>
                        <span style="font-size:12px; color:var(--text-sub)" id="det-date"></span>
                    </div>
                    <div style="font-size:14px; color:var(--text-sub)">to me ‚ñæ</div>
                </div>
            </div>
            <div class="detail-body" id="det-body"></div>
        </div>
    </div>

    <!-- Compose Modal -->
    <div class="overlay" id="overlay" onclick="closeCompose()"></div>
    <div id="compose-modal">
        <p style="font-family:'Google Sans'; font-size: 18px; line-height: 1.4;">
            You can't compose anything better than what you already have ‚ù§
        </p>
        <button onclick="closeCompose()" style="margin-top: 24px; padding: 10px 24px; border-radius: 20px; border: 1px solid var(--border); background: white; font-weight: 500;">Close</button>
    </div>

    <script>
        const emails = [
            // PRIMARY - 15 Letters
            { id: 1, tab: 'primary', sender: 'Niv ‚ù§Ô∏è', subject: '2083km and I still feel you right here', date: 'Feb 14', unread: true, starred: true, body: "Happy Valentine's Day, sweetheart.\n\nThey say distance is hard, but they haven't met us. 2083km is a lot of map, but it's nothing compared to how I feel when we're on the phone. \n\nI love how you manage everything so perfectly even when things get chaotic. You are so resilient, so driven, and so incredibly beautiful. I was looking at that screenshot from our one FaceTime again... your eyes are actually legendary.\n\nI love you, Aaradhya. To forever and many more cats." },
            { id: 2, tab: 'primary', sender: 'Niv (dhoklu)', subject: 'The "I like you so much" era', date: 'Feb 13', unread: false, starred: false, body: "Remember when we used to say 'I like you so much' because we weren't official yet? We both knew, though. I think I knew from the second I slid into your DMs and you actually replied. Best risk I ever took. \n\nI love you (officially and deeply)." },
            { id: 3, tab: 'primary', sender: 'Niv ‚ù§Ô∏è', subject: 'About that mole on your forehead...', date: 'Feb 12', unread: false, starred: true, body: "I don't think I tell you enough, but that little mole on your forehead is my favorite thing in the world. Well, that and your lips. \n\nI was thinking about your lipstick tutorial earlier. I still can't believe you walked me through the whole routine step by step. I loved every second of you yapping about it." },
            { id: 4, tab: 'primary', sender: 'Niv ‚ù§Ô∏è', subject: 'Stitch, Ivy, Jackie, and Wilson', date: 'Feb 11', unread: false, starred: false, body: "Stitch is sitting on my lap right now, but he's missing his mom. \n\nI can't wait until we have the whole crew. Ivy, Jackie, and Wilson are going to have the best parents. I'm already imagining us doing laundry and grocery shopping together. Just normal domestic stuff. That's the dream." },
            { id: 5, tab: 'primary', sender: 'Niv', subject: 'Biology and your voice', date: 'Feb 10', unread: true, starred: false, body: "Keep yapping about biology. I'm obsessed with your voice and how excited you get explaining things. \n\nYou're so smart and determined, Aaradhya. It's one of the million things I love about you." },
            { id: 6, tab: 'primary', sender: 'Niv ‚ù§Ô∏è', subject: 'The Christmas Nail Clippers', date: 'Feb 9', unread: false, starred: false, body: "Still can't believe you sent me a nail clipper kit for Christmas just because I joked about not having one. You pay so much attention to the little things. \n\nI'm so lucky you're my person." },
            { id: 7, tab: 'primary', sender: 'Niv', subject: 'Murdle & Puzzles', date: 'Feb 8', unread: false, starred: false, body: "Halfway through the Murdle book! It makes me think of you every time I open it. \n\nYou know me so well. Thank you for being my puzzle partner for life." },
            { id: 8, tab: 'primary', sender: 'Niv ‚ù§Ô∏è', subject: 'Flight Tracking', date: 'Feb 7', unread: false, starred: true, body: "I found myself tracking random flights today just because they were heading in your direction. \n\nCounting down the days until I'm tracking your flight to come see me. I'm going to be the most annoying person at the airport waiting for you." },
            { id: 9, tab: 'primary', sender: 'Niv', subject: 'Harry Potter or Gilmore Girls?', date: 'Feb 6', unread: false, starred: false, body: "Which one are we marathoning first? I'm leaning toward Gilmore Girls just so I can see you relate to every character. \n\nI'll bring the momos, you bring the biology facts." },
            { id: 10, tab: 'primary', sender: 'Niv ‚ù§Ô∏è', subject: 'Your Favorite Pen', date: 'Feb 5', unread: false, starred: false, body: "I saw a pen today that looked exactly like your favorite one. I almost bought ten of them for you. \n\nI remember everything, sweetheart. Especially you." },
            { id: 11, tab: 'primary', sender: 'Niv', subject: '3am and missing you', date: 'Feb 4', unread: true, starred: false, body: "Can't sleep. Just thinking about your hair and how much I want to be there while you're doing your makeup routine. \n\nYou're the best thing that ever happened to my DMs." },
            { id: 12, tab: 'primary', sender: 'Niv ‚ù§Ô∏è', subject: 'Domestic Life', date: 'Feb 14', unread: true, starred: false, body: "I want to do the most boring things with you. I want to argue about which detergent to buy. I want to wait for you while you shop for books. \n\nLife with you is the only thing I'm driven toward." },
            { id: 13, tab: 'primary', sender: 'Niv', subject: 'Momo Date?', date: 'Feb 13', unread: false, starred: false, body: "Virtual momo date tonight? I'll get the Wai Wai too. \n\nI miss eating with you. I miss everything with you." },
            { id: 14, tab: 'primary', sender: 'Niv ‚ù§Ô∏è', subject: 'Our One FaceTime', date: 'Feb 12', unread: false, starred: true, body: "Thinking about that one FaceTime. I was so nervous but then you started talking and everything felt right. \n\nYou're even more beautiful in motion." },
            { id: 15, tab: 'primary', sender: 'Niv (Future Husband)', subject: 'I promise', date: 'Feb 11', unread: false, starred: true, body: "I promise to always listen when you yap. I promise to track every flight. And I promise to love you through all 2083 kilometers until they're 0. \n\nYou're my world." },

            // PROMOTIONS - 20 Funny Spam
            { id: 16, tab: 'promotions', sender: 'Cuddle Corp', subject: 'üî• 50% OFF: Unlimited Cuddles Sale!', date: 'Feb 14', unread: true, starred: false, body: "LIMITED TIME OFFER: Get 100% off physical distance when Niv arrives. \n\nTerms and Conditions: Must provide snacks and listen to Niv's bad jokes." },
            { id: 17, tab: 'promotions', sender: 'Momo Express', subject: 'Your "Aaradhya Special" is ready!', date: 'Feb 13', unread: false, starred: false, body: "One order of extra-hot momos and one long-distance boyfriend who can't stop thinking about you. \n\nOrder status: Out for delivery (2083km remaining)." },
            { id: 18, tab: 'promotions', sender: 'Stitch & Co', subject: 'Urgent: Dad is being boring', date: 'Feb 12', unread: true, starred: false, body: "Mom, come home. Dad is just staring at his phone and smiling at pictures of you. It's weird. \n\nSigned, Stitch." },
            { id: 19, tab: 'promotions', sender: 'Wai Wai World', subject: 'New Flavor: Dhoklu Spicy', date: 'Feb 11', unread: false, starred: false, body: "Try our new flavor! It's chaotic, sweet, and obsessed with biology girls. \n\nAvailable only to Aaradhya." },
            { id: 20, tab: 'promotions', sender: 'Flight Tracker', subject: 'Alert: Heart approaching destination', date: 'Feb 10', unread: false, starred: false, body: "Niv's heart has entered your airspace. Please prepare for landing and excessive 'I love you' messages." },
            { id: 21, tab: 'promotions', sender: 'Biology News', subject: 'Discovery: Your Voice is the cure', date: 'Feb 9', unread: false, starred: false, body: "New research shows that hearing Aaradhya yap about cells for 10 minutes cures 100% of Niv's sadness." },
            { id: 22, tab: 'promotions', sender: 'The Pen Shop', subject: 'We have your favorite!', date: 'Feb 8', unread: false, starred: false, body: "Because Niv actually pays attention. We have reserved all the pens in the world for you." },
            { id: 23, tab: 'promotions', sender: 'Laundry Day', subject: 'Subscription: Shared Laundry 2026', date: 'Feb 7', unread: false, starred: false, body: "Your subscription to 'Doing laundry together and losing socks' has been confirmed. Start date: ASAP." },
            { id: 24, tab: 'promotions', sender: 'Book Worms', subject: 'Niv sent you a new book!', date: 'Feb 6', unread: false, starred: false, body: "Another one for your collection. Because he loves how you look when you're lost in a story." },
            { id: 25, tab: 'promotions', sender: 'Gilmore Fans', subject: 'You're a Lorelai!', date: 'Feb 5', unread: false, starred: false, body: "And Niv is definitely... well, he's just happy to be invited to the marathon." },
            { id: 26, tab: 'promotions', sender: 'Future Cats', subject: 'Ivy, Jackie & Wilson have messaged', date: 'Feb 14', unread: true, starred: false, body: "They're just checking in to see when the house will be ready. They're very excited to meet their mom." },
            { id: 27, tab: 'promotions', sender: 'Murdle Inc', subject: 'Case Solved: The Perfect Girl', date: 'Feb 13', unread: false, starred: false, body: "The evidence is clear. The mole, the eyes, the biology facts. It's Aaradhya. Case closed." },
            { id: 28, tab: 'promotions', sender: 'Hogwarts Express', subject: 'Ticket for: Aaradhya', date: 'Feb 12', unread: false, starred: false, body: "One way ticket from distance to Niv's arms. Platform 9 3/4." },
            { id: 29, tab: 'promotions', sender: 'Lipstick VIP', subject: 'New Tutorial requested!', date: 'Feb 11', unread: false, starred: false, body: "Niv is requesting another step-by-step breakdown. He wasn't paying attention to the lipstick, just you." },
            { id: 30, tab: 'promotions', sender: 'Grocery Pro', subject: 'Your shared cart is empty', date: 'Feb 10', unread: false, starred: false, body: "Let's fill it with momos, coffee, and things for the cats. Can't wait to shop with you." },
            { id: 31, tab: 'promotions', sender: 'Dhoklu Support', subject: 'Password Reset: My Heart', date: 'Feb 9', unread: false, starred: false, body: "Password is: Aaradhya. It's the only way to get inside." },
            { id: 32, tab: 'promotions', sender: 'Long Distance Co', subject: 'Notice: Distance Elimination', date: 'Feb 8', unread: false, starred: false, body: "We are working hard to reduce 2083km to 0km. Please hold on to your Niv." },
            { id: 33, tab: 'promotions', sender: 'Resilience Weekly', subject: 'Cover Girl: Aaradhya', date: 'Feb 7', unread: false, starred: false, body: "How she manages everything and still looks that good. A deep dive." },
            { id: 34, tab: 'promotions', sender: 'Nail Kit Club', subject: 'Membership: Platinum', date: 'Feb 6', unread: false, starred: false, body: "Thanks to the best Christmas gift ever. Niv's nails are finally under control." },
            { id: 35, tab: 'promotions', sender: 'Relationship Goals', subject: 'You've reached the top tier!', date: 'Feb 5', unread: false, starred: false, body: "8 months and going strong. Next level: Forever." },

            // SOCIAL - 10 Notifications
            { id: 36, tab: 'social', sender: 'Niv', subject: 'Niv liked your existence ‚ù§', date: 'Feb 14', unread: true, starred: false, body: "Notification: Niv just realized again how lucky he is to have you." },
            { id: 37, tab: 'social', sender: 'Niv', subject: 'Niv commented on your smile: "Legendary"', date: 'Feb 13', unread: false, starred: false, body: "He's still thinking about that one FaceTime. You should call him." },
            { id: 38, tab: 'social', sender: 'Niv', subject: 'You appeared in Niv's mind 87 times today', date: 'Feb 12', unread: true, starred: false, body: "A new record! He's currently obsessed with your latest voice note." },
            { id: 39, tab: 'social', sender: 'Niv', subject: 'Friend request: Your Future Husband', date: 'Feb 11', unread: false, starred: false, body: "Accept? (Hint: You already did 8 months ago)." },
            { id: 40, tab: 'social', sender: 'Niv', subject: 'Niv shared a post: "Why Aaradhya is the best"', date: 'Feb 10', unread: false, starred: false, body: "It's a very long list. It includes biology, Harry Potter, and your lips." },
            { id: 41, tab: 'social', sender: 'Niv', subject: 'Niv tagged you in a thought: "She's perfect"', date: 'Feb 9', unread: false, starred: false, body: "He does this every few minutes. You might want to check in on him." },
            { id: 42, tab: 'social', sender: 'Niv', subject: 'Niv reacted ‚ù§Ô∏è to: everything about you', date: 'Feb 8', unread: false, starred: false, body: "No exceptions. Even the chaotic parts." },
            { id: 43, tab: 'social', sender: 'Niv', subject: 'Niv sent you a memory: 8 months ago', date: 'Feb 7', unread: false, starred: false, body: "The DM that started it all. He's so glad he took that chance." },
            { id: 44, tab: 'social', sender: 'Niv', subject: 'New Admirer: It's Niv again', date: 'Feb 6', unread: false, starred: false, body: "He just can't help it. You're too beautiful." },
            { id: 45, tab: 'social', sender: 'Niv', subject: 'Niv is listening to: Your Voice Notes', date: 'Feb 5', unread: false, starred: false, body: "On repeat. It's his favorite podcast." }
        ];

        // Generating the remaining 30 UPDATES emails
        for(let i=1; i<=30; i++) {
            emails.push({
                id: 45 + i,
                tab: 'updates',
                sender: 'Daily Dhoklu',
                subject: `Daily Reminder #${i}: You are beautiful ‚ú®`,
                date: 'Feb 12',
                unread: i > 25,
                starred: false,
                body: "Just your daily update from Niv's heart. \n\nYou are still kind, still creative, and still the most beautiful girl in the world. \n\nDon't forget it!"
            });
        }

        let currentTab = 'primary';

        function renderEmails() {
            const container = document.getElementById('email-container');
            container.innerHTML = '';
            
            const filtered = emails.filter(e => e.tab === currentTab).sort((a,b) => b.id - a.id);
            
            filtered.forEach(email => {
                const item = document.createElement('div');
                item.className = `email-item ${email.unread ? 'unread' : ''}`;
                item.onclick = () => openDetail(email);
                
                item.innerHTML = `
                    <div class="sender-img" style="background: ${getAvatarColor(email.sender)}">${email.sender[0]}</div>
                    <div class="email-content">
                        <div class="email-top">
                            <span class="sender-name">${email.sender}</span>
                            <span class="email-date">${email.date}</span>
                        </div>
                        <div class="subject-line">${email.subject}</div>
                        <div class="snippet-line">
                            <span>${email.body.substring(0, 35)}...</span>
                            <span class="star-icon ${email.starred ? 'active' : ''}" onclick="event.stopPropagation(); toggleStar(${email.id})">
                                ${email.starred ? '‚òÖ' : '‚òÜ'}
                            </span>
                        </div>
                    </div>
                `;
                container.appendChild(item);
            });
        }

        function getAvatarColor(name) {
            const colors = ['#f44336', '#e91e63', '#9c27b0', '#673ab7', '#3f51b5', '#2196f3', '#009688', '#4caf50'];
            let hash = 0;
            for (let i = 0; i < name.length; i++) hash = name.charCodeAt(i) + ((hash << 5) - hash);
            return colors[Math.abs(hash) % colors.length];
        }

        function setTab(tab, el) {
            currentTab = tab;
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            el.classList.add('active');
            renderEmails();
        }

        function openDetail(email) {
            email.unread = false;
            document.getElementById('det-subject').innerText = email.subject;
            document.getElementById('det-sender').innerText = email.sender;
            document.getElementById('det-date').innerText = email.date + ' (10 hours ago)';
            document.getElementById('det-body').innerText = email.body;
            document.getElementById('det-avatar').innerText = email.sender[0];
            document.getElementById('det-avatar').style.background = getAvatarColor(email.sender);
            document.getElementById('detail-view').style.display = 'flex';
            renderEmails();
        }

        function closeDetail() {
            document.getElementById('detail-view').style.display = 'none';
        }

        function toggleStar(id) {
            const email = emails.find(e => e.id === id);
            email.starred = !email.starred;
            renderEmails();
        }

        function openCompose() {
            document.getElementById('overlay').style.display = 'block';
            document.getElementById('compose-modal').style.display = 'block';
        }

        function closeCompose() {
            document.getElementById('overlay').style.display = 'none';
            document.getElementById('compose-modal').style.display = 'none';
        }

        // Initialize
        renderEmails();
    </script>
</body>
</html>